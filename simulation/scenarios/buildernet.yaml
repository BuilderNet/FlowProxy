general:
  # Stop after 10 minutes (simulated time)
  stop_time: 10m
  # Show progress in the console
  progress: true
  # Add some latency to syscalls to avoid deadlocks
  model_unblocked_syscall_latency: true


experimental:
  # Pin the CPU to the same core for better performance
  use_cpu_pinning: true
  # Use the new Rust TCP implementation for better performance
  use_new_tcp: true

# Intra-zone latencies: https://latency.azure.cloud63.fr
# Inter-zone latencies: https://learn.microsoft.com/en-us/azure/networking/azure-network-latency
network:
  graph:
    type: gml
    file:
      path: /root/scenarios/network-graph-2-zones.yaml

hosts:
  hub:
    network_node_id: 0
    processes:
    - path: /root/mockhub
      start_time: 0s
      expected_final_state: running
      environment:
        # System API ports of the proxies
        SYSTEM_PORT: "9755"
  submitter:
    # Run the submitter in zone 0
    network_node_id: 0
    processes:
    - path: /root/submitter
      args: --url http://proxy2:9754 --path ../../../testdata/testdata.parquet --scale 1
      # Wait 35s for the proxies to connect to each other
      start_time: 35s
      expected_final_state: running
  proxy1:
    network_node_id: 0
    processes:
    - path: /root/buildernet-orderflow-proxy
      args: --user-listen-url 0.0.0.0:9754 --system-listen-url 0.0.0.0:9755 --builder-listen-url 0.0.0.0:8756 --builder-hub-url http://hub:3000
      start_time: 1s
      expected_final_state: running
      environment:
        RUST_LOG: info
  proxy2:
    network_node_id: 1
    processes:
    - path: /root/buildernet-orderflow-proxy
      args: --user-listen-url 0.0.0.0:9754 --system-listen-url 0.0.0.0:9755 --builder-listen-url 0.0.0.0:8756 --builder-hub-url http://hub:3000
      start_time: 1s
      expected_final_state: running
      environment:
        RUST_LOG: info
