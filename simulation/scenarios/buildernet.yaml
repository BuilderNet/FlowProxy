general:
  stop_time: 1000s

# Intra-zone latencies: https://latency.azure.cloud63.fr
# Inter-zone latencies: https://learn.microsoft.com/en-us/azure/networking/azure-network-latency
network:
  graph:
#    type: 1_gbit_switch
    type: gml
    file:
      path: /root/scenarios/network-graph-2-zones.yaml

hosts:
  hub:
    network_node_id: 0
    processes:
    - path: /root/mockhub
      start_time: 0s
      expected_final_state: running
  submitter:
    network_node_id: 1
    processes:
    - path: /root/submitter
      args: --url http://proxy3:9754 --path ../../../testdata/testdata.parquet --scale 1
      start_time: 2s
      expected_final_state: running
  proxy1: &proxy-virginia
    network_node_id: 0
    processes:
    - path: /root/buildernet-orderflow-proxy
      args: --user-listen-url 0.0.0.0:9754 --system-listen-url 0.0.0.0:9755 --builder-listen-url 0.0.0.0:8756 --builder-hub-url http://hub:3000
      start_time: 1s
      expected_final_state: running
      environment:
        - RUST_LOG=debug
  proxy2: *proxy-virginia
  proxy3: &proxy-frankfurt
    network_node_id: 1
    processes:
    - path: /root/buildernet-orderflow-proxy
      args: --user-listen-url 0.0.0.0:9754 --system-listen-url 0.0.0.0:9755 --builder-listen-url 0.0.0.0:8756 --builder-hub-url http://hub:3000
      start_time: 1s
      expected_final_state: running
  proxy4: *proxy-frankfurt
